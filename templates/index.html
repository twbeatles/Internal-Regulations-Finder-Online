<!DOCTYPE html>
<html lang="ko" data-theme="dark">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="사내 규정 검색기 - AI 기반 하이브리드 검색 시스템">
    <meta name="robots" content="noindex, nofollow">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="Content-Security-Policy"
        content="default-src 'self'; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src https://fonts.gstatic.com; script-src 'self' 'unsafe-inline';">

    <!-- PWA 지원 (v2.0) -->
    <link rel="manifest" href="/static/manifest.json">
    <meta name="theme-color" content="#667eea">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="규정검색">
    <link rel="apple-touch-icon" href="/static/icons/icon-192.png">

    <title>사내 규정 검색기</title>
    <link rel="stylesheet" href="/static/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap"
        rel="stylesheet">
</head>

<body>
    <!-- 스킵 네비게이션 (접근성) -->
    <a href="#search-input" class="skip-link">검색으로 건너뛰기</a>

    <div class="app-container">
        <!-- 헤더 -->
        <header class="header" role="banner">
            <div class="header-content">
                <div class="logo">
                    <span class="logo-icon" aria-hidden="true">📚</span>
                    <h1>사내 규정 검색기</h1>
                </div>
                <div class="header-info">
                    <button id="theme-toggle" class="theme-toggle" title="테마 변경" aria-label="다크/라이트 테마 전환">🌙</button>
                    <span id="status-badge" class="status-badge loading" role="status" aria-live="polite">
                        <span class="status-dot" aria-hidden="true"></span>
                        <span id="status-text">연결 중...</span>
                    </span>
                    <a href="/admin" class="admin-link" aria-label="관리자 페이지로 이동">⚙️ 관리</a>
                </div>
            </div>
        </header>

        <!-- 메인 컨텐츠 -->
        <main class="main-content" role="main" id="main-content">
            <!-- 검색 섹션 -->
            <section class="search-section" aria-labelledby="search-title">
                <h2 id="search-title" class="sr-only">규정 검색</h2>
                <div class="search-container">
                    <div class="search-box" role="search">
                        <input type="search" id="search-input" placeholder="검색어를 입력하세요... (예: 휴가 규정, 복리후생)"
                            autocomplete="off" minlength="2" maxlength="200" aria-label="규정 검색어 입력"
                            aria-describedby="search-hint" spellcheck="false">
                        <span id="search-hint" class="sr-only">최소 2자 이상 입력하세요. Ctrl+K로 언제든 검색창에 포커스할 수 있습니다.</span>
                        <button id="search-btn" class="search-btn" disabled aria-label="검색 실행">
                            <span class="btn-icon" aria-hidden="true">🔍</span>
                            <span class="btn-text">검색</span>
                        </button>
                    </div>
                    <div class="search-options">
                        <label class="option-item">
                            <span>결과 개수:</span>
                            <select id="result-count">
                                <option value="5" selected>5개</option>
                                <option value="10">10개</option>
                                <option value="20">20개</option>
                            </select>
                        </label>
                        <label class="option-item">
                            <span>파일 필터:</span>
                            <select id="filter-file">
                                <option value="">전체 파일</option>
                            </select>
                        </label>
                        <label class="option-item">
                            <span>정렬:</span>
                            <select id="sort-by">
                                <option value="relevance">관련도순</option>
                                <option value="filename">파일명순</option>
                                <option value="length">길이순</option>
                            </select>
                        </label>
                        <label class="option-item checkbox">
                            <input type="checkbox" id="hybrid-search" checked>
                            <span>하이브리드 검색</span>
                        </label>
                    </div>
                </div>
            </section>

            <!-- 결과 섹션 -->
            <section class="results-section" aria-labelledby="results-title">
                <h2 id="results-title" class="sr-only">검색 결과</h2>
                <div id="results-container" class="results-container" role="region" aria-live="polite"
                    aria-atomic="false">
                    <div class="welcome-message">
                        <div class="welcome-icon" aria-hidden="true">👋</div>
                        <h2>사내 규정을 검색해보세요</h2>
                        <p>휴가, 복리후생, 근무 규정 등 다양한 사내 규정을 빠르게 찾아볼 수 있습니다.</p>
                        <div class="search-tips"
                            style="margin-top: 24px; padding: 16px; background: var(--bg-input); border-radius: 12px; text-align: left; max-width: 400px; margin-left: auto; margin-right: auto;">
                            <p style="font-weight: 600; margin-bottom: 12px; color: var(--accent-primary);">💡 검색 팁</p>
                            <ul
                                style="list-style: none; padding: 0; margin: 0; color: var(--text-secondary); font-size: 14px;">
                                <li style="margin-bottom: 8px;">• <kbd
                                        style="background: var(--bg-secondary); padding: 2px 6px; border-radius: 4px; font-size: 12px;">Ctrl
                                        + K</kbd> 검색창 바로가기</li>
                                <li style="margin-bottom: 8px;">• <kbd
                                        style="background: var(--bg-secondary); padding: 2px 6px; border-radius: 4px; font-size: 12px;">?</kbd>
                                    단축키 도움말</li>
                                <li>• 하이브리드 검색으로 더 정확한 결과 제공</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <!-- 푸터 -->
        <footer class="footer">
            <p>© <span id="current-year">2025</span> 사내 규정 검색기 - AI 기반 규정 검색 시스템</p>
        </footer>
    </div>

    <!-- 토스트 알림 -->
    <div id="toast-container" class="toast-container"></div>

    <!-- 읽기 모드 모달 (v2.0) -->
    <div id="reader-modal" class="modal-overlay" style="display: none;">
        <div class="reader-content">
            <div class="reader-toolbar">
                <button id="reader-close" class="reader-btn" title="닫기 (Esc)">✕</button>
                <div class="reader-title" id="reader-title">문서 읽기</div>
                <div class="reader-controls">
                    <button id="reader-font-down" class="reader-btn" title="글자 작게">A-</button>
                    <span id="reader-font-size">16px</span>
                    <button id="reader-font-up" class="reader-btn" title="글자 크게">A+</button>
                </div>
            </div>
            <div id="reader-body" class="reader-body"></div>
        </div>
    </div>

    <!-- 키보드 단축키 도움말 모달 (v2.0) -->
    <div id="shortcuts-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content shortcuts-modal">
            <div class="modal-header">
                <h3>⌨️ 키보드 단축키</h3>
                <button id="shortcuts-close" class="modal-close">✕</button>
            </div>
            <div class="shortcuts-list">
                <div class="shortcut-group">
                    <h4>검색</h4>
                    <div class="shortcut-item">
                        <kbd>Ctrl</kbd> + <kbd>K</kbd>
                        <span>검색창 포커스</span>
                    </div>
                    <div class="shortcut-item">
                        <kbd>Enter</kbd>
                        <span>검색 실행</span>
                    </div>
                    <div class="shortcut-item">
                        <kbd>Esc</kbd>
                        <span>모달 닫기</span>
                    </div>
                </div>
                <div class="shortcut-group">
                    <h4>탐색</h4>
                    <div class="shortcut-item">
                        <kbd>J</kbd> / <kbd>↓</kbd>
                        <span>다음 결과</span>
                    </div>
                    <div class="shortcut-item">
                        <kbd>K</kbd> / <kbd>↑</kbd>
                        <span>이전 결과</span>
                    </div>
                    <div class="shortcut-item">
                        <kbd>Enter</kbd>
                        <span>선택한 결과 열기</span>
                    </div>
                </div>
                <div class="shortcut-group">
                    <h4>하이라이트</h4>
                    <div class="shortcut-item">
                        <kbd>N</kbd>
                        <span>다음 하이라이트</span>
                    </div>
                    <div class="shortcut-item">
                        <kbd>P</kbd>
                        <span>이전 하이라이트</span>
                    </div>
                </div>
                <div class="shortcut-group">
                    <h4>기타</h4>
                    <div class="shortcut-item">
                        <kbd>?</kbd>
                        <span>단축키 도움말</span>
                    </div>
                    <div class="shortcut-item">
                        <kbd>R</kbd>
                        <span>읽기 모드</span>
                    </div>
                    <div class="shortcut-item">
                        <kbd>T</kbd>
                        <span>테마 변경</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 하이라이트 네비게이션 바 (v2.0) -->
    <div id="highlight-nav" class="highlight-nav" style="display: none;">
        <span id="highlight-count">0 / 0</span>
        <button id="highlight-prev" class="highlight-btn" title="이전 하이라이트 (P)">◀</button>
        <button id="highlight-next" class="highlight-btn" title="다음 하이라이트 (N)">▶</button>
        <button id="highlight-close" class="highlight-btn" title="닫기">✕</button>
    </div>

    <script src="/static/app.js"></script>
</body>

</html>